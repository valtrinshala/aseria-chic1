var l=function(){var i,s,u=function(){i=FormValidation.formValidation(s,{fields:{name:{validators:{notEmpty:{message:window.keys.locationName}}},location:{validators:{notEmpty:{message:window.keys.locationAddress}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}}),$(".check-taxes").on("click",function(){var e=$(this);e.prop("checked")&&$.ajax({url:"/admin/setting/ourLocation/check/taxes",type:"GET",data:{type:e.attr("name")},success:function(o){o.status===1&&(e.prop("checked",!1),Swal.fire({text:o.message,icon:"error",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:window.keys.createButton,cancelButtonText:window.keys.cancelButtonText,customClass:{confirmButton:"btn btn-primary",cancelButton:"btn fw-bold btn-active-light-primary"}}).then(n=>{n.isConfirmed&&window.open(o.uri+"?type="+e.attr("name"),"_blank")}))},error:function(o){Swal.fire({text:window.keys.ekioskServerErrors,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}})}})}),$("#submitButton").on("click",function(){$("#kt_ecommerce_add_ourLocation_form").submit()}),$(".delete-button").click(function(e){e.preventDefault();const o=$(this).data("id"),n=$(this).data("name");Swal.fire({text:window.keys.deleteText+" "+n+"?",icon:"warning",showCancelButton:!0,buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonText,cancelButtonText:window.keys.cancelButtonText,customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-active-light-primary"}}).then(function(r){r.value?$.ajax({url:"/admin/setting/ourLocation/"+o,method:"DELETE",contentType:!1,processData:!1,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){location.href="/admin/setting/ourLocation/"},statusCode:{422:function(t){Swal.fire({text:t.responseJSON.error,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}})}},error:function(t,a,c){console.error(t.responseText)}}):r.dismiss==="cancel"&&Swal.fire({text:foodItemName+" "+window.keys.notDeleted,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}})})}),$("#kt_ecommerce_add_ourLocation_form").submit(function(e){var o=new FormData($("#kt_ecommerce_add_ourLocation_form")[0]);if($("#method").val()==="create")var n="/admin/setting/ourLocation";else if($("#method").val()==="update")n="/admin/setting/ourLocation/"+$("#page-id").val(),o.append("_method","PUT");else return;e.preventDefault(),i&&i.validate().then(function(r){r=="Valid"?$.ajax({url:n,type:"POST",data:o,contentType:!1,processData:!1,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){Swal.fire({text:window.keys.locationAdded,icon:"success",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}}).then(function(){$("#method").val()==="create"?$("#kt_ecommerce_add_ourLocation_form")[0].reset():location.href="/admin/setting/ourLocation"})},statusCode:{422:function(t){let a=window.keys.ekioskErrorMessage+`

`;for(let c in t.responseJSON.errors)a+=`${t.responseJSON.errors[c].join(", ")}
`;Swal.fire({text:a,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}})}},error:function(t){Swal.fire({text:t.responseJSON.errors??window.keys.ekioskServerErrors,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}})}}):Swal.fire({text:window.keys.ekioskErrorsDetected,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}})})})};return{init:function(){s=document.querySelector("#kt_ecommerce_add_ourLocation_form"),u()}}}();KTUtil.onDOMContentLoaded(function(){l.init()});
