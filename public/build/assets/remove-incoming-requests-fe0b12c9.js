var f=function(){var n,e,u=function(){e.querySelectorAll("tbody tr").forEach(o=>{const t=o.querySelectorAll("td"),r=moment(t[3].innerHTML,"DD MMM YYYY, LT").format();t[3].setAttribute("data-order",r)}),n=$(e).DataTable({info:!1,order:[],columnDefs:[{orderable:!1,targets:0},{orderable:!1,targets:3}]}),n.on("draw",function(){a(),KTMenu.init()})},a=()=>{e.querySelectorAll('[data-kt-customer-table-filter="delete_row"]').forEach(o=>{o.addEventListener("click",function(t){t.preventDefault();const r=t.target.getAttribute("data-incomingRequest-id"),i=t.target.closest("tr"),s=i.querySelectorAll("td")[1].innerText;Swal.fire({text:window.keys.deleteText+" "+s+"?",icon:"warning",showCancelButton:!0,buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonText,cancelButtonText:window.keys.cancelButtonText,customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-active-light-primary"}}).then(function(c){c.value?$.ajax({url:"/admin/kitchen-android/incomingRequests/"+r,method:"DELETE",contentType:!1,processData:!1,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(l){n.row($(i)).remove().draw()},error:function(l,m,w){console.error(l.responseText)}}):c.dismiss==="cancel"&&Swal.fire({text:s+" "+window.keys.notDeleted,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}})})})})};return{init:function(){e=document.querySelector("#kt_incomingRequests_table"),e&&(u(),a())}}}();KTUtil.onDOMContentLoaded(function(){f.init()});
