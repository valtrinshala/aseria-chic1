var h=function(){var s,m,f=function(){s=FormValidation.formValidation(m,{fields:{name:{validators:{notEmpty:{message:window.keys.paymentRequired}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}});let o=$("#colorDiv"),c=$("#infoSpanColor"),n=$("#iconDiv"),l=$("#infoSpanDiv");o.show(),n.hide(),$('#kt_security_summary_tabs a[data-bs-toggle="tab"]').click(function(){switch($(this).attr("href")){case"#kt_security_summary_tab_pane_hours":o.show(),c.show(),n.hide(),l.hide();break;case"#kt_security_summary_tab_pane_day":o.hide(),c.hide(),n.show(),l.show();break;default:o.show(),c.show(),n.hide(),l.hide()}}),$(".paymentCategories").children().click(function(){$(".input-color").val($(this).data("color")),$(".paymentMethod-color").css("background-color",$(this).data("color"))}),$("#submitButton").on("click",function(){$("#kt_ecommerce_add_paymentMethod_form").submit()}),$(".delete-button").click(function(r){r.preventDefault();const a=$(this).data("id"),e=$(this).data("name");Swal.fire({text:window.keys.deleteText+" "+e+"?",icon:"warning",showCancelButton:!0,buttonsStyling:!1,confirmButtonText:window.keys.createButton,cancelButtonText:window.keys.cancelButtonText,customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-active-light-primary"}}).then(function(i){i.value?$.ajax({url:"/admin/paymentMethod/"+a,method:"DELETE",contentType:!1,processData:!1,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){location.href="/admin/paymentMethod"},statusCode:{422:function(t){Swal.fire({text:t.responseJSON.error,icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}},error:function(t,d,u){console.error(t.responseText)}}):i.dismiss==="cancel"&&Swal.fire({text:e+" "+window.keys.notDeleted,icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn fw-bold btn-primary"}})})}),$("#kt_ecommerce_add_paymentMethod_form").submit(function(r){var a=new FormData($("#kt_ecommerce_add_paymentMethod_form")[0]);if($("#method").val()==="create")var e="/admin/paymentMethod";else if($("#method").val()==="update")e="/admin/paymentMethod/"+$("#page-id").val(),a.append("_method","PUT");else return;r.preventDefault(),s&&s.validate().then(function(i){i=="Valid"?$.ajax({url:e,type:"POST",data:a,contentType:!1,processData:!1,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){Swal.fire({text:"The payment method has been successfully added!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}}).then(function(){$("#method").val()==="create"?location.reload():location.href="/admin/paymentMethod"})},statusCode:{422:function(t){let d=`Sorry, looks like there are some errors detected:

`;for(let u in t.responseJSON.errors)d+=`${t.responseJSON.errors[u].join(", ")}
`;Swal.fire({text:d,icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}},error:function(t){Swal.fire({text:"Sorry, looks like there are some errors in server, please try again.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}}):Swal.fire({text:window.keys.ekioskErrorsDetected,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}})})})};return{init:function(){m=document.querySelector("#kt_ecommerce_add_paymentMethod_form"),f()}}}();KTUtil.onDOMContentLoaded(function(){h.init()});
