var y=function(){var s,o,b=function(){o.querySelectorAll("tbody tr").forEach(e=>{const t=e.querySelectorAll("td"),r=moment(t[7].innerHTML,"DD MMM YYYY, LT").format();t[7].setAttribute("data-order",r)}),s=$(o).DataTable({info:!1,order:[],columnDefs:[{orderable:!1,targets:0},{orderable:!1,targets:7}]}),s.on("draw",function(){u(),i(),d(),KTMenu.init()})},m=()=>{document.querySelector('[data-kt-customer-table-filter="search"]').addEventListener("keyup",function(e){s.search(e.target.value).draw()})},i=()=>{o.querySelectorAll('[data-kt-customer-table-filter="delete_row"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const r=t.target.getAttribute("data-cashRegister-id"),a=t.target.closest("tr"),c=a.querySelectorAll("td")[1].innerText;Swal.fire({text:window.keys.deleteText+c+"?",icon:"warning",showCancelButton:!0,buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonText,cancelButtonText:window.keys.cancelButtonText,customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-active-light-primary"}}).then(function(l){l.value?$.ajax({url:"/admin/cashRegister/"+r,method:"DELETE",contentType:!1,processData:!1,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(f){s.row($(a)).remove().draw()},error:function(f,h,w){console.error(f.responseText)}}):l.dismiss==="cancel"&&Swal.fire({text:c+window.keys.notDeleted,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}})})})})},u=()=>{const n=o.querySelectorAll('[type="checkbox"]');document.querySelector('[data-kt-customer-table-select="delete_selected"]'),n.forEach(e=>{e.addEventListener("click",function(){setTimeout(function(){d()},50)})})};const d=()=>{const n=document.querySelector('[data-kt-customer-table-toolbar="base"]'),e=document.querySelector('[data-kt-customer-table-toolbar="selected"]'),t=document.querySelector('[data-kt-customer-table-select="selected_count"]'),r=o.querySelectorAll('tbody [type="checkbox"]');let a=!1,c=0;r.forEach(l=>{l.checked&&(a=!0,c++)}),a?(t.innerHTML=c,n.classList.add("d-none"),e.classList.remove("d-none")):(n.classList.remove("d-none"),e.classList.add("d-none"))};return{init:function(){o=document.querySelector("#kt_customers_table"),o&&(b(),u(),m(),i())}}}();KTUtil.onDOMContentLoaded(function(){y.init()});
