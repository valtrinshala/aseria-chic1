var w=function(){var a,r,b=function(){r.querySelectorAll("tbody tr").forEach(n=>{const e=n.querySelectorAll("td"),s=moment(e[7].innerHTML,"DD MMM YYYY, LT").format();e[7].setAttribute("data-order",s)}),a=$(r).DataTable({info:!1,order:[],columnDefs:[{orderable:!1,targets:0},{orderable:!1,targets:7}]}),a.on("draw",function(){u(),d(),f(),KTMenu.init()})},m=()=>{document.querySelector('[data-kt-customer-table-filter="search"]').addEventListener("keyup",function(n){a.search(n.target.value).draw()})},d=()=>{r.querySelectorAll('[data-kt-customer-table-filter="delete_row"]').forEach(n=>{n.addEventListener("click",function(e){e.preventDefault();const s=e.target.getAttribute("data-eKioskAsset-id"),c=e.target.closest("tr"),t=c.querySelectorAll("td")[1].innerText;Swal.fire({text:window.keys.deleteText+t+"?",icon:"warning",showCancelButton:!0,buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonText,cancelButtonText:window.keys.cancelButtonText,customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-active-light-primary"}}).then(function(l){l.value?$.ajax({url:"/admin/eKioskAsset/"+s,method:"DELETE",contentType:!1,processData:!1,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(i){a.row($(c)).remove().draw()},error:function(i,k,y){console.error(i.responseText)}}):l.dismiss==="cancel"&&Swal.fire({text:t+window.keys.notDeleted,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}})})})})};$("#positionDropdown").change(function(){var o=$("option:selected",this).data("description");$(".description-placeholder").text(o)});var u=()=>{const o=r.querySelectorAll('[type="checkbox"]'),n=document.querySelector('[data-kt-customer-table-select="delete_selected"]');o.forEach(e=>{e.addEventListener("click",function(){setTimeout(function(){f()},50)})}),n.addEventListener("click",function(){Swal.fire({text:"Are you sure you want to delete selected assets?",icon:"warning",showCancelButton:!0,buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonText,cancelButtonText:window.keys.cancelButtonText,customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-active-light-primary"}}).then(function(e){if(e.value){let s=[];o.forEach(t=>{t.checked&&(s.push(t.value),a.row($(t.closest("tbody tr"))).remove().draw())}),$.ajax({url:"/admin/eKioskAsset/delete/selected",method:"POST",data:{ids:s},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},error:function(t,l,i){console.error(t.responseText)}});const c=r.querySelectorAll('[type="checkbox"]')[0];c.checked=!1}else e.dismiss==="cancel"&&Swal.fire({text:window.keys.selectedeKiosk,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}})})})};const f=()=>{const o=document.querySelector('[data-kt-customer-table-toolbar="base"]'),n=document.querySelector('[data-kt-customer-table-toolbar="selected"]'),e=document.querySelector('[data-kt-customer-table-select="selected_count"]'),s=r.querySelectorAll('tbody [type="checkbox"]');let c=!1,t=0;s.forEach(l=>{l.checked&&(c=!0,t++)}),c?(e.innerHTML=t,o.classList.add("d-none"),n.classList.remove("d-none")):(o.classList.remove("d-none"),n.classList.add("d-none"))};return{init:function(){r=document.querySelector("#kt_customers_table"),r&&(b(),u(),m(),d())}}}();KTUtil.onDOMContentLoaded(function(){w.init()});
