var m=function(){var o,r,a=function(){o=FormValidation.formValidation(r,{fields:{name:{validators:{notEmpty:{message:window.keys.userRequired}}},email:{validators:{notEmpty:{message:window.keys.userEmail},emailAddress:{message:window.keys.valueEmail}}},role_id:{validators:{notEmpty:{message:window.keys.userRoleIsRequired}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}}),$("#roles").change(function(){let e=$("#location_id");$(this).find("option:selected").val()==="eb325fb3-e752-447e-9d17-1e9aa6687d00"?e.prop("disabled",!0):e.prop("disabled",!1)}),$("#submitButton").on("click",function(){$("#kt_ecommerce_add_user_form").submit()}),$("#kt_ecommerce_add_user_form").submit(function(e){var n=new FormData($("#kt_ecommerce_add_user_form")[0]);if($("#method").val()==="create")var s="/admin/user";else if($("#method").val()==="update")s="/admin/user/"+$("#page-id").val(),n.append("_method","PUT");else return;e.preventDefault(),o&&o.validate().then(function(l){l=="Valid"?$.ajax({url:s,type:"POST",data:n,contentType:!1,processData:!1,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){Swal.fire({text:window.keys.userSuccess,icon:"success",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}}).then(function(){$("#method").val()==="create"?($("#kt_ecommerce_add_user_form")[0].reset(),$("#roles").val(null).trigger("change")):location.href="/admin/user"})},statusCode:{422:function(t){let i=window.keys.ekioskErrorMessage+`

`;for(let d in t.responseJSON.errors)i+=`${t.responseJSON.errors[d].join(", ")}
`;Swal.fire({text:i,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}})}},error:function(t){Swal.fire({text:window.keys.ekioskServerErrors,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}})}}):Swal.fire({text:window.keys.ekioskErrorsDetected,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}})})})};return{init:function(){r=document.querySelector("#kt_ecommerce_add_user_form"),a()}}}();KTUtil.onDOMContentLoaded(function(){m.init()});
