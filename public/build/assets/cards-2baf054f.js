window.queueInterval=null;window.lastPrint=Date.now();window.printerPreNonce="order-";window.orderPagMan={parentEl:".card-pagination",placementElement:".card-pagination .pag-numbers",activeClass:"active",reachableClass:"reachable",clickSelect:"[page]",elementHTML:'<button class="pag-btn number {active_class} {reachable_class}" page="{number}">{number}</button>',current:1,reachableDistance:5,pagAmount:0,maxPags:5,currPagAmount:0,orderElements:{},setup:function(){const e=document.querySelector(this.parentEl+" .previous"),t=document.querySelector(this.parentEl+" .next");e.addEventListener("click",r=>{window.orderPagMan.current-1<1||(window.orderPagMan.clickPag(--window.orderPagMan.current),window.orderPagMan.orderReset())}),t.addEventListener("click",r=>{window.orderPagMan.current>Object.keys(window.orderPagMan.orderElements).length-1||(window.orderPagMan.clickPag(++window.orderPagMan.current),window.orderPagMan.orderReset())})},addPag:function(e=null){if(this.pagAmount>=this.maxPags)return;let t=this.currPagAmount+1;if(this.currPagAmount++,this.currPagAmount<this.current-this.maxPags*.5)return;this.orderElements[t]=e;const r=document.querySelector(this.placementElement);if(!r)return;let i=this.elementHTML;i=i.replaceAll("{number}",t);let a="",o="";t==this.current?a=this.activeClass:t<this.current+this.reachableDistance&&t>this.current-this.reachableDistance&&(o=this.reachableClass),i=i.replaceAll("{active_class}",a),i=i.replaceAll("{reachable_class}",o),r.innerHTML+=i;const s=document.querySelectorAll(this.placementElement+" "+this.clickSelect);for(let d of s)d.addEventListener("click",l=>{const n=d.getAttribute("page");window.orderPagMan.clickPag(n)});this.pagAmount++},clearPags:function(){this.currPagAmount=0,this.pagAmount=0;const e=document.querySelector(this.placementElement);e&&(e.innerHTML="")},clickPag:function(e){this.current=e;const t=window.orderPagMan.orderElements[this.current];t&&t.scrollIntoView({behavior:"smooth"}),"orderReset"in window.orderPagMan&&window.orderPagMan.orderReset()}};const h={clearOrders:function(){const e=document.querySelectorAll(".order-card[order]");if(e.length>0)for(let t=e.length-1;t>=0;t--)e[t].remove(0)},addOrder:function(e){let t=e.status.replaceAll(" ","_");const r=document.createElement("div");r.classList.add("order-card"),r.classList.add("holder"),r.classList.add("w-fit-content"),r.classList.add("mt-3"),r.classList.add("flex-shrink-0"),r.classList.add(t),r.setAttribute("order",e.id);let i="";e.note!=""&&(i=`
                <div class="Note mb-4 p-4">
                    <div class="title fw-bold">${window.keys.note}:</div>
                    <div class="note">${e.note}</div>
                </div>
            `);let a=`
            <button order-id="${e.id}" class="order-confirm col btn btn-primary d-flex align-items-center justify-content-center w-100">
                ${window.keys.confirmBtn}
            </button>
        `;e.assignment==1&&(a=`
                <button order-id="${e.id}" class="order-assign col btn btn-primary no-hover d-flex align-items-center justify-content-center w-100">
                    ${window.keys.assignmentMe}
                </button>
            `);let o="",s=e.items;if(s.length>0)for(let n=s.length-1;n>=0;n--){const c=s[n];"show_kitchen"in c&&c.show_kitchen==!1&&s.splice(n,1)}let d=-1;for(let n of s){d++;let c=null,u=null;d+1<s.length&&(c=s[d+1]),d-1>=0&&(u=s[d-1]);const f=!n.isMeal&&u!=null&&u.isMeal?"prod-after-meal":"",b=n.mealName||n.isMeal&&c!=null&&!c.isMeal?"no-border":"",C=n.isMeal?"meal":"",q=n.checked||"meal"in n&&n.meal.checked?"crossed":"",x="meal"in n?n.meal.id:n.id;let S="";if(!n.mealName){let m="";n.checked&&(m="checked"),S=`
                    <div class="form-check form-check-sm form-check-custom form-check-solid align-items-start">
                        <input together="${x}" ${m} class="p-4 form-check-input item-completable" type="checkbox" item-id="${n.id}" order-id="${e.id}" child-key="${n.childRandomKey}" key="${n.randomKey}">
                    </div>
                `}let p="";if("extra"in n&&n.extra.length!=0){p=`
                    <div class="extra">
                        <div class="title crossable fw-bold">${window.keys.extraAdds}:</div>
                        <div class="extra-items mb-2">
                `;for(let m of n.extra)p+=`<div class="extra-item crossable ps-3">${m.quantity}x ${m.name}</div>`;p+="</div></div>"}let g="";if("removed"in n&&n.removed.length!=0){g=`
                    <div class="no">
                        <div class="title crossable fw-bold">${window.keys.extraRemoved}:</div>
                        <div class="no-items">
                `;for(let m of n.removed)g+=`<div class="extra-item crossable ps-3">${m.name}</div>`;g+="</div></div>"}let O=`
                ${p}
                ${g}
            `,_="";(n.isMeal||!n.mealName)&&(_=`
                    <div childRandomKey="${n.childRandomKey}" randomKey="${n.randomKey}" order="${e.id}" class="print-order-item ps-5">
                        <svg class="primary-children" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                          <g id="print" transform="translate(-4.5 -4.5)">
                            <path id="Path_13" data-name="Path 13" d="M21.808,10.5H7.288A2.788,2.788,0,0,0,4.5,13.288v7.6a2.692,2.692,0,0,0,2.692,2.692h.385v1.908a1.938,1.938,0,0,0,1.938,1.938h9.969a1.938,1.938,0,0,0,1.938-1.938V23.577h.385A2.692,2.692,0,0,0,24.5,20.885V13.192A2.692,2.692,0,0,0,21.808,10.5ZM19.885,25.485a.4.4,0,0,1-.4.4H9.515a.4.4,0,0,1-.4-.4V17.823a.4.4,0,0,1,.4-.4h9.969a.4.4,0,0,1,.4.4Z" transform="translate(0 -2.923)" fill="#5d4bdf"/>
                            <path id="Path_14" data-name="Path 14" d="M21.68,4.5H13.219a2.7,2.7,0,0,0-2.664,2.308h13.79A2.7,2.7,0,0,0,21.68,4.5Z" transform="translate(-2.95 0)" fill="#5d4bdf"/>
                          </g>
                        </svg>
                    </div>
                `),o+=`
                <div class="d-flex ${f} ${b} justify-content-between ${C} food-item ${q}" order="${e.id}" together="${x}" item="${n.id}" randomKey="${n.randomKey}">
                    <div class="left d-flex gap-4">
                        ${S}

                        <div class="">
                            <div class="item">
                                <span class="crossable title fw-bold fs-4">${n.quantity}x ${n.name}</span>
                            </div>
                            ${O}
                        </div>
                    </div>

                    <div class="right">
                        ${_}
                    </div>
                </div>
            `}r.innerHTML=`
            <div class="card ms-3 p-0">
                <div class="d-flex justify-content-between px-3 align-items-center py-1 border1 status-color rounded-top" style="background-color: ${e.status_color}">

                    <h3 class="card-title searchable-text fw-bold m-0 text-white">#${e.view_id}</h3>
                    <h3 class="card-title searchable-text fw-bold m-0 status-text text-white">${e.status}</h3>
                    <div class="card-toolbar">
                        <span class="searchable-text text-white">${e.view_price}</span>
                    </div>

                </div>
                <div class="card-body p-0 rounded-bottom">
                    <div class="px-5 bg-body position-relative pt-4">
                        <div class="row">
                            <div class="col">
                                <div class="fs-5 fw-bold searchable-text">${e.table}</div>
                                <div class="fs-6 fw-medium searchable-text">${window.keys.assignment}: <span class="chef-assign">${e.chef}</span></div>
                            </div>
                            <div class="col text-end">
                                <div class="fs-5 text-danger fw-bold time-lapse">0s</div>
                                <div class="fs-6 date-stamp fw-medium" stamp="${e.time}">${window.keys.ordered}: ${e.view_date}</div>
                            </div>
                        </div>
                    </div>

                    <div class="px-5 bg-body position-relative pt-4">
                        <div class="row">
                            <div class="col">
                                <div class="fs-6 fw-medium"><span class="completed-items">${e.completed}</span>/<span items="${e.count}" class="order-count">${e.count}</span> ${window.keys.com_orders}</div>
                            </div>
                            <div class="col text-end">
                                <div class="fs-6 fw-medium"><span class="progress-percentage">${e.progress}</span>%</div>

                            </div>
                        </div>
                    </div>
                    <div class="bg-body pb-4 px-5">
                        <div class="progress h-5px w-100">
                            <div class="progress-bar bg-success" role="progressbar" style="width: ${e.progress}%" aria-valuenow="${e.progress}" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>

                    <div class="px-5 bg-body d-flex gap-2 pb-4">
                        ${a}
                        <!--
                        <button order="${e.id}" class="print-order col btn btn-primary btn-secondary-cus d-flex align-items-center gap-3 justify-content-center w-80 max-w-35" disabled>
                            ${window.keys.printOrder}
                        </button>
                        -->
                    </div>

                    <div class="card-bottom-bit bg-body px-5 overflow-auto rounded-bottom">
                        <div class="food-items mb-4">
                            ${o}
                        </div>

                        ${i}
                    </div>

                </div>
            </div>
        </div>
        `,document.getElementById("ordering").appendChild(r),orderPagMan.addPag(r)}};$(document).on("click",".item-completable",function(){const e=this.getAttribute("item-id"),t=this.getAttribute("order-id"),r=this.getAttribute("key"),i=this.getAttribute("together"),a=this;if(!e||!t||!r)return;let o="true";a.checked||(o="false");let s=a.checked?"add":"remove";a.checked;let d=document.querySelectorAll(`[order="${t}"][together="${i}"][randomKey="${r}"]`);for(let c of d)c.classList[s]("crossed");w(t);let l={order_id:t,item_id:e,added:o,randomKey:r};const n=this.getAttribute("child-key");n!=null&&n!=0&&(l.childRandomKey=n),$.ajax({url:"/admin/prepare/item",method:"POST",async:!0,dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:l,success:c=>{if(c.status==2){location.href=c.uri;return}if(c.status!=0){a.checked=!o;let f=document.querySelectorAll(`[order="${t}"][together="${i}"][randomKey="${r}"]`);for(let b of f)b.classList[s]("crossed");"message"in c&&c.message!=""&&Swal.fire({text:c.message,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}});return}w(t)==100?y(t,2):y(t,1),"message"in c&&c.message!=""&&Swal.fire({text:c.message,icon:"success",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}})},error:c=>{a.checked=!o;let u=document.querySelectorAll(`[order="${t}"][together="${i}"][randomKey="${r}"]`);for(let f of u)f.classList[s]("crossed");console.error(c),Swal.fire({text:window.keys.unexpectedError,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}})}})});$(document).on("click",".order-assign",function(){const e=this.getAttribute("order-id");e&&$.ajax({url:"/admin/assignToMe",method:"POST",async:!0,dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{order_id:e},success:t=>{if(t.status==2){location.href=t.uri;return}if(t.status!=0){Swal.fire({text:t.message,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}});return}this.textContent=window.keys.confirmBtn,this.classList.remove("order-assign"),this.classList.add("order-confirm"),y(e,1),E(e,{name:document.getElementById("current-user").getAttribute("user")})},error:t=>{console.error(t),Swal.fire({text:window.keys.unexpectedError,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}})}})});$(document).on("click",".order-confirm",function(){const e=this.getAttribute("order-id");$.ajax({url:"/admin/confirmOrder",method:"POST",async:!0,dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{order_id:e},success:t=>{if(t.status==2){location.href=t.uri;return}if(t.status!=0){Swal.fire({text:t.message,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}});return}const r=document.querySelector(`.order-card[order="${e}"]`);r&&r.remove()},error:t=>{console.error(t),Swal.fire({text:window.keys.unexpectedError,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}})}})});window.cancelation={current:null,orders:[],reasons:{},keySwaps:{},update:function(){return this.current!=null||this.orders.length==0?!1:(this.current=this.orders.shift(),this.current)},acknowledge:function(){let e=this.current;$.ajax({method:"POST",url:"/admin/approveCancelKitchen",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{order_id:e},success:t=>{if(t.status==2){location.href=t.uri;return}if(t.status==1){Swal.fire({text:t.message,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}});return}t.status==0&&(this.current=null,$("#ack-modal").modal("hide")),t.message!=""&&Swal.fire({text:data.message,icon:"success",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}})},error:t=>{Swal.fire({text:window.keys.unexpectedError,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}})}})},getId:function(e){return e in this.keySwaps?this.keySwaps[e]:""},getReason:function(e){return e in this.reasons?this.reasons[e]:""}};$(document).on("click",".acknowledge-current-order",function(){window.cancelation.acknowledge()});$(document).on("click",".coming-soon",function(){Swal.fire({text:window.keys.comingSoon,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}})});$(document).on("click",".print-order",function(){});$(document).on("click",".print-order-item",function(){const e=this.getAttribute("order"),t=this.getAttribute("randomKey");if(!e||!t)return;const r={order_id:e,random_key:t},i=this.getAttribute("childRandomKey");i!=null&&i!=0&&(r.child_random_key=i);const a=[];for(let o in r)a.push(`${o}=${r[o]}`);$.ajax({method:"GET",url:"/admin/printKitchenItem?"+a.join("&"),dataType:"json",success:o=>{if(o.status==2){location.href=o.uri;return}if(o.status==1){Swal.fire({text:o.message,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}});return}if(!("print_order"in o)){Swal.fire({text:"Print order does not exist, alert development team as this error should never appear",icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}});return}T(o.print_order,"sticker"),o.message!=""&&Swal.fire({text:o.message,icon:"success",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}})},error:o=>{console.error(o),Swal.fire({text:window.keys.unexpectedError,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}})}})});$(document).ready(()=>{window.orderPagMan.setup(),setInterval(()=>{(window.cancelation.orders.length!=0||window.cancelation.current!=null)&&$("#ack-modal").modal("show");let e=window.cancelation.update();e!=!1&&($("#ack-modal .order-id").text(window.cancelation.getId(e)),$("#ack-modal .order-reason").text(window.cancelation.getReason(e)),$("#ack-modal").modal("show"))},50)});function y(e,t){const r=[window.keys.waitingOrder,window.keys.progressOrder,window.keys.completedOrder],i=["#E7B951","#FF3636","#29B93A"],a=document.querySelector(`.order-card[order="${e}"]`);if(!a)return!1;for(let o of r){let s=o.replaceAll(" ","_");a.classList.remove(s)}if(t in r){let o=r[t];const s=o.replaceAll(" ","_");a.classList.add(s);const d=a.querySelector(".status-color");d&&(d.style.backgroundColor=i[t]);const l=a.querySelector(".status-text");return l&&(l.textContent=o),!0}return!1}function E(e,t){const r=document.querySelector(`.order-card[order="${e}"]`);if(!r)return!1;const i=r.querySelector(".chef-assign");return i&&"name"in t&&(i.textContent=t.name),!0}function w(e){const t=document.querySelector(`.order-card[order="${e}"]`);if(!t)return 0;const r=t.querySelectorAll("input[item-id]"),i=r.length;let a=0;r.forEach(n=>{n.checked&&a++});const o=(a/i*100).toFixed(2),s=t.querySelector(".progress-bar");s&&(s.style.width=`${o}%`);const d=t.querySelector(".completed-items");d&&(d.textContent=a);const l=t.querySelector(".progress-percentage");return l&&(l.textContent=o),o}const B=1,v=B*60,P=v*60;function k(){const e=Date.now()/1e3,t=document.querySelectorAll(".order-card[order]");for(let r of t){const i=r.querySelector(".date-stamp");if(!i)return;const a=r.querySelector(".time-lapse");if(!a)return;const o=i.getAttribute("stamp"),s=e-parseFloat(o),d=Math.floor(s/P),l=Math.floor(s%P/v),n=Math.floor(s%v/B),c=[];d!=0&&c.push(`${d}h`),(l!=0||d!=0)&&c.push(`${l}m`),c.push(`${n}s`);let u=c.join(" ");a.textContent=u}}setInterval(()=>{k()},1e3);function M(){$.ajax({url:"/admin/kitchen/orders",method:"GET",async:!0,dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:e=>{if(e.status==2){location.href=e.uri;return}if(e.status!=0){"message"in e&&e.message!=""&&Swal.fire({text:e.message,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}});return}h.clearOrders();let t=e.data.canceled_orders;for(let o of t)window.cancelation.orders.push(o.id),window.cancelation.reasons[o.id]=o.cancellation_reason,window.cancelation.keySwaps[o.id]=o.order_number;orderPagMan.clearPags();let r=e.data.orders;const i=document.getElementsByClassName("no-orders-pop");if(r.length==0)for(let o of i)o.classList.remove("d-none");else for(let o of i)o.classList.add("d-none");for(let o of r)h.addOrder(o);k();const a=document.querySelectorAll(".order-card[order]");for(let o of a){const s=o.getAttribute("order");w(s)}window.orderPagMan.orderReset=function(){h.clearOrders();let o=e.data.canceled_orders;for(let n of o)window.cancelation.orders.push(n.id),window.cancelation.reasons[n.id]=n.cancellation_reason,window.cancelation.keySwaps[n.id]=n.order_number;orderPagMan.clearPags();let s=e.data.orders;const d=document.getElementsByClassName("no-orders-pop");if(s.length==0)for(let n of d)n.classList.remove("d-none");else for(let n of d)n.classList.add("d-none");for(let n of s)h.addOrder(n);k();const l=document.querySelectorAll(".order-card[order]");for(let n of l){const c=n.getAttribute("order");w(c)}},"message"in e&&e.message!=""&&Swal.fire({text:e.message,icon:"success",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn btn-primary"}})},error:e=>{Swal.fire({text:window.keys.unexpectedError,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}})}})}window.updating_orders=!0;M();setInterval(()=>{window.updating_orders&&M()},1e4);document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".order-card[order]");for(let r of e){const i=r.getAttribute("order");w(i)}let t=localStorage.getItem("printer_settings");if(t!=null)try{t=JSON.parse(t),"receipt_printer"in t&&t.receipt_printer&&t.receipt_printer.status==1&&"Mine"in window&&window.Mine.postMessage(`con:${window.printerPreNonce}${t.receipt_printer.printer.name}:${t.receipt_printer.printer.ip}:${t.receipt_printer.printer.port}`)}catch{}});window.queuedStrings={sticker:[],order:[]};window.types={sticker:[],order:[]};function T(e,t){let r=localStorage.getItem("printer_settings");if(r!=null)try{r=JSON.parse(r),t=="sticker"&&"sticker_printer"in r&&r.sticker_printer&&r.sticker_printer.status==1&&("Mine"in window?L(e):(console.log(`con:${window.printerPreNonce}${r.sticker_printer.printer.name}:${r.sticker_printer.printer.ip}:${r.sticker_printer.printer.port}`),console.log(window.printerPreNonce+r.sticker_printer.printer.name),console.log(e),window.queuedStrings.sticker.push(e),window.currentPrinting=1)),t=="order"&&"order_printer"in r&&r.order_printer&&r.order_printer.status==1&&("Mine"in window?(window.Mine.postMessage(`con:${window.printerPreNonce}${r.order_printer.printer.name}:${r.order_printer.printer.ip}:${r.order_printer.printer.port}`),window.queuedStrings.order.push(e),window.types.order.push(window.printerPreNonce+r.order_printer.printer.name)):(console.log(`con:${window.printerPreNonce}${r.order_printer.printer.name}:${r.order_printer.printer.ip}:${r.order_printer.printer.port}`),console.log(window.printerPreNonce+r.sticker_printer.printer.name),console.log(e),window.queuedStrings.order.push(e),window.currentPrinting=2))}catch{}}window.currentPrinting=1;window.debug_print=!1;window.failed_connection=(e,t,r)=>{if(t=="Succeed"){window.debug_print&&alert(e+" printed");return}Swal.fire({text:e+" "+window.keys.connectionFailReason+": "+t,icon:"error",buttonsStyling:!1,confirmButtonText:window.keys.confirmButtonOk,customClass:{confirmButton:"btn fw-bold btn-primary"}})};function I(e){window.debug_print&&alert(e);let t=localStorage.getItem("printer_settings");if(t!=null)try{t=JSON.parse(t),e=="sticker"&&"sticker_printer"in t&&t.sticker_printer&&t.sticker_printer.status==1&&"Mine"in window&&(window.printerPreNonce="order-",window.currentPrinting=1,window.Mine.postMessage(`con:${window.printerPreNonce}${t.sticker_printer.printer.name}:${t.sticker_printer.printer.ip}:${t.sticker_printer.printer.port}`)),e=="order"&&"order_printer"in t&&t.order_printer&&t.order_printer.status==1&&"Mine"in window&&(window.Mine.postMessage(`con:${window.printerPreNonce}${t.order_printer.printer.name}:${t.order_printer.printer.ip}:${t.order_printer.printer.port}`),window.currentPrinting=2)}catch{}}document.addEventListener("DOMContentLoaded",()=>{I("sticker")});setInterval(()=>{"Mine"in window&&window.queuedStrings.sticker.length!=0&&window.queueInterval==null&&A()},1e3);function L(e){if(Date.now()-window.lastPrint>3e3&&window.queuedStrings.sticker.length==0){window.lastPrint=Date.now(),invoicePrinting(e);return}window.queuedStrings.sticker.push(e),window.queueInterval==null&&A()}function A(){window.queueInterval!=null&&clearInterval(window.queueInterval),window.queueInterval=setInterval(()=>{if(window.queuedStrings.sticker.length==0){window.queueInterval!=null&&clearInterval(window.queueInterval),window.queueInterval=null;return}let e="";if(window.debug_print&&alert(window.currentPrinting),e=window.queuedStrings.sticker.shift(),!(!e||e=="")&&(window.debug_print&&alert("Printing "+window.currentPrinting+" "+e),invoicePrinting(e),window.queuedStrings.sticker.length==0)){window.queueInterval!=null&&clearInterval(window.queueInterval),window.queueInterval=null;return}},3e3)}
